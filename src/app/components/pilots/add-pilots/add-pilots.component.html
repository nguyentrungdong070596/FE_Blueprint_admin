<div class="content">
  <div class="add-container">
    <h2 *ngIf="!isEditMode">Thêm Mới</h2>
    <h2 *ngIf="isEditMode">Chỉnh Sửa</h2>
    <form [formGroup]="form">
      <div class="form-group">
        <label
          for="name"
          [ngClass]="{
            'color-form-red':
              !isEditMode &&
              form.get('name')?.invalid &&
              (form.get('name')?.dirty || form.get('name')?.touched)
          }"
          >Tên hoa tiêu:</label
        >
        <input
          type="text"
          id="name"
          formControlName="name"
          class="form-control"
          required
        />
        <small
          *ngIf="
            !isEditMode &&
            form.get('name')?.invalid &&
            (form.get('name')?.dirty || form.get('name')?.touched)
          "
          [ngClass]="{ 'color-form-red': form.get('name')?.invalid }"
        >
          Vui lòng nhập tên hoa tiêu
        </small>
      </div>

      <div>
        <label
          for="rank"
          [ngClass]="{
            'color-form-red':
              !isEditMode &&
              form.get('rank')?.invalid &&
              (form.get('rank')?.dirty || form.get('rank')?.touched)
          }"
          >Hạng hoa tiêu:</label
        >
        <select id="rank" formControlName="rank" required>
          <option *ngFor="let rank of ranks" [value]="rank.value">
            {{ rank.name }}
          </option>
        </select>
        <small
          *ngIf="
            !isEditMode &&
            form.get('rank')?.invalid &&
            (form.get('rank')?.dirty || form.get('rank')?.touched)
          "
          [ngClass]="{ 'color-form-red': form.get('rank')?.invalid }"
        >
          Vui lòng chọn hạng hoa tiêu
        </small>
      </div>

      <div class="form-group">
        <label
          for="file"
          [ngClass]="{
            'color-form-red':
              !isEditMode &&
              form.get('image')?.invalid &&
              (form.get('image')?.dirty || form.get('image')?.touched)
          }"
          >Hình ảnh:</label
        >
        <input
          type="file"
          id="image"
          (change)="onFileSelected($event)"
          accept="image/*"
          class="form-control"
          formControlName="image"
        />
        <small
          *ngIf="
            !isEditMode &&
            form.get('image')?.invalid &&
            (form.get('image')?.dirty || form.get('image')?.touched)
          "
          [ngClass]="{ 'color-form-red': form.get('image')?.invalid }"
        >
          Vui lòng tải hình ảnh.
        </small>
      </div>
      <!-- Preview Hình Ảnh -->
      <div *ngIf="preview_upload">
        <img [src]="preview_upload" alt="Selected Image" width="300" />
      </div>

      <div class="form-group">
        <label
          for="sort"
          [ngClass]="{
            'color-form-red':
              !isEditMode &&
              form.get('sort')?.invalid &&
              (form.get('sort')?.dirty || form.get('sort')?.touched)
          }"
          >Số thứ tự:</label
        >
        <input
          type="number"
          id="sort"
          formControlName="sort"
          class="form-control"
          required
        />
        <small
          *ngIf="
            !isEditMode &&
            form.get('sort')?.invalid &&
            (form.get('sort')?.dirty || form.get('sort')?.touched)
          "
          [ngClass]="{ 'color-form-red': form.get('sort')?.invalid }"
        >
          Số thứ tự không được để trống.
        </small>
      </div>

      <div *ngIf="isEditMode" class="form-group">
        <label
          for="status"
          [ngClass]="{
            'color-form-red':
              form.get('status')?.invalid &&
              (form.get('status')?.dirty || form.get('status')?.touched)
          }"
          >Trạng thái</label
        >
        <select
          id="status"
          formControlName="status"
          class="form-control"
          required
        >
          <option [ngValue]="true">Hiển thị</option>
          <option [ngValue]="false">Ẩn</option>
        </select>
        <small
          *ngIf="
            form.get('status')?.invalid &&
            (form.get('status')?.dirty || form.get('status')?.touched)
          "
          [ngClass]="{ 'color-form-red': form.get('status')?.invalid }"
          >Vui lòng chọn trạng thái.</small
        >
      </div>

      <div class="bt-actions">
        <button
          pButton
          pRipple
          [label]="isEditMode ? 'Cập nhật' : 'Thêm mới'"
          (click)="onSubmit(form.value)"
          class="p-button-success"
        ></button>
      </div>
    </form>
  </div>
</div>
