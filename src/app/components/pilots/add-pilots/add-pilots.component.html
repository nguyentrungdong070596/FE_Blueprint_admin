<div class="content">
  <div class="add-container">
    <h2 *ngIf="!isEditMode">Th√™m M·ªõi</h2>
    <h2 *ngIf="isEditMode">Ch·ªânh S·ª≠a</h2>
    <form [formGroup]="form">
      <div class="form-group">
        <label
          for="name"
          [ngClass]="{
            'color-form-red':
              !isEditMode &&
              form.get('name')?.invalid &&
              (form.get('name')?.dirty || form.get('name')?.touched)
          }"
          >T√™n hoa ti√™u:</label
        >
        <input
          type="text"
          id="name"
          formControlName="name"
          class="form-control"
          required
        />
        <small
          *ngIf="
            !isEditMode &&
            form.get('name')?.invalid &&
            (form.get('name')?.dirty || form.get('name')?.touched)
          "
          [ngClass]="{ 'color-form-red': form.get('name')?.invalid }"
        >
          Vui l√≤ng nh·∫≠p t√™n hoa ti√™u
        </small>
      </div>

      <div class="form-group">
        <label for="content">N·ªôi dung:</label>
        <quill-editor formControlName="content"></quill-editor>

        <!-- <div class="NgxEditor__Wrapper">
          <ngx-editor-menu [editor]="editor" [toolbar]="customToolbar">
          </ngx-editor-menu>

          <button type="button" (click)="fileInput.click()">üñº Ch·ªçn ·∫£nh</button>
          <input
            type="file"
            #fileInput
            style="display: none"
            accept="image/*"
            (change)="onFileNGX_EDITORSelected($event)"
          />

          <ngx-editor
            [editor]="editor"
            formControlName="content"
            [placeholder]="'Type here...'"
          ></ngx-editor>
        </div> -->

        <small
          *ngIf="
            !isEditMode &&
            form.get('content')?.invalid &&
            (form.get('content')?.dirty || form.get('content')?.touched)
          "
          [ngClass]="{ 'color-form-red': form.get('content')?.invalid }"
        >
          Vui l√≤ng nh·∫≠p n·ªôi dung.
        </small>
      </div>

      <div class="form-group">
        <label for="content_en">N·ªôi dung (EN):</label>
        <quill-editor formControlName="content_en"></quill-editor>

        <small
          *ngIf="
            !isEditMode &&
            form.get('content_en')?.invalid &&
            (form.get('content_en')?.dirty || form.get('content_en')?.touched)
          "
          [ngClass]="{ 'color-form-red': form.get('content_en')?.invalid }"
        >
          Vui l√≤ng nh·∫≠p n·ªôi dung EN.
        </small>
      </div>

      <div>
        <label
          for="rank"
          [ngClass]="{
            'color-form-red':
              !isEditMode &&
              form.get('rank')?.invalid &&
              (form.get('rank')?.dirty || form.get('rank')?.touched)
          }"
          >H·∫°ng hoa ti√™u:</label
        >
        <select id="rank" formControlName="rank" required>
          <option *ngFor="let rank of ranks" [value]="rank.value">
            {{ rank.name }}
          </option>
        </select>
        <small
          *ngIf="
            !isEditMode &&
            form.get('rank')?.invalid &&
            (form.get('rank')?.dirty || form.get('rank')?.touched)
          "
          [ngClass]="{ 'color-form-red': form.get('rank')?.invalid }"
        >
          Vui l√≤ng ch·ªçn h·∫°ng hoa ti√™u
        </small>
      </div>

      <div class="form-group">
        <label
          for="file"
          [ngClass]="{
            'color-form-red':
              !isEditMode &&
              form.get('image')?.invalid &&
              (form.get('image')?.dirty || form.get('image')?.touched)
          }"
          >H√¨nh ·∫£nh:</label
        >
        <!-- Upload ·∫£nh 1 -->
        <input
          type="file"
          id="image"
          (change)="onFileSelectedImage1($event)"
          accept="image/*"
          class="form-control"
          formControlName="image"
        />

        <small
          *ngIf="
            !isEditMode &&
            form.get('image')?.invalid &&
            (form.get('image')?.dirty || form.get('image')?.touched)
          "
          [ngClass]="{ 'color-form-red': form.get('image')?.invalid }"
        >
          Vui l√≤ng t·∫£i h√¨nh ·∫£nh.
        </small>
      </div>

      <!-- Preview H√¨nh ·∫¢nh -->
      <div *ngIf="preview_upload">
        <img [src]="preview_upload" alt="Selected Image" width="300" />
      </div>
      <!---H√¨nh ·∫£nh 2-->
      <div class="form-group">
        <label
          for="file"
          [ngClass]="{
            'color-form-red':
              !isEditMode &&
              form.get('image2')?.invalid &&
              (form.get('image2')?.dirty || form.get('image2')?.touched)
          }"
          >H√¨nh ·∫£nh:</label
        >
        <!-- Upload ·∫£nh 2 -->
        <input
          type="file"
          id="image2"
          (change)="onFileSelectedImage2($event)"
          accept="*"
          class="form-control"
          formControlName="image2"
        />
        <small
          *ngIf="
            !isEditMode &&
            form.get('image2')?.invalid &&
            (form.get('image2')?.dirty || form.get('image2')?.touched)
          "
          [ngClass]="{ 'color-form-red': form.get('image2')?.invalid }"
        >
          Vui l√≤ng t·∫£i.
        </small>
      </div>

      <!-- Preview H√¨nh ·∫¢nh 2 -->
      <div *ngIf="preview_upload2">
        <!-- <img [src]="preview_upload2" alt="Selected" width="300" /> -->
         <app-file-viewer [fileUrl]="preview_upload2"></app-file-viewer>

      </div>

      <div class="form-group">
        <label
          for="sort"
          [ngClass]="{
            'color-form-red':
              !isEditMode &&
              form.get('sort')?.invalid &&
              (form.get('sort')?.dirty || form.get('sort')?.touched)
          }"
          >S·ªë th·ª© t·ª±:</label
        >
        <input
          type="number"
          id="sort"
          formControlName="sort"
          class="form-control"
          required
        />
        <small
          *ngIf="
            !isEditMode &&
            form.get('sort')?.invalid &&
            (form.get('sort')?.dirty || form.get('sort')?.touched)
          "
          [ngClass]="{ 'color-form-red': form.get('sort')?.invalid }"
        >
          S·ªë th·ª© t·ª± kh√¥ng ƒë∆∞·ª£c ƒë·ªÉ tr·ªëng.
        </small>
      </div>

      <div *ngIf="isEditMode" class="form-group">
        <label
          for="status"
          [ngClass]="{
            'color-form-red':
              form.get('status')?.invalid &&
              (form.get('status')?.dirty || form.get('status')?.touched)
          }"
          >Tr·∫°ng th√°i</label
        >
        <select
          id="status"
          formControlName="status"
          class="form-control"
          required
        >
          <option [ngValue]="true">Hi·ªÉn th·ªã</option>
          <option [ngValue]="false">·∫®n</option>
        </select>
        <small
          *ngIf="
            form.get('status')?.invalid &&
            (form.get('status')?.dirty || form.get('status')?.touched)
          "
          [ngClass]="{ 'color-form-red': form.get('status')?.invalid }"
          >Vui l√≤ng ch·ªçn tr·∫°ng th√°i.</small
        >
      </div>

      <div class="bt-actions">
        <button
          pButton
          pRipple
          [label]="isEditMode ? 'C·∫≠p nh·∫≠t' : 'Th√™m m·ªõi'"
          (click)="onSubmit(form.value)"
          class="p-button-success"
        ></button>
      </div>
    </form>
  </div>
</div>
